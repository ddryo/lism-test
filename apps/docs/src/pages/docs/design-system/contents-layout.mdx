import { Layout, Container, Box, Text, Center, Columns, Layer } from '@loos/lism-core';
import { Desktop } from "@phosphor-icons/react";

# コンテンツレイアウト

Lismでサイト構築するにあたり、コンテンツのレイアウトを行うために必要な前提知識がいくつかあります。
このページでは、それらの紹介をしていきます。


## Layout State クラス

Lismには、レイアウトモジュール要素とは別に、コンテンツサイズを制御したりコンテンツ間隔を調整するためのクラスを用意しており、これらを Layout State と呼んでいます。

- `is--container` : コンテナ要素で、かつ**自身の横幅**を制御できるクラス
- `is--constrained` : コンテナ要素で、かつ**子要素の横幅**を制御するためのクラス
	{/* - （WordPressでいうところの`is-layout-constrained`の機能にあたります。） */}
- `is--flow` : コンテンツ間隔の余白量を制御するためのクラス
	{/* - （WordPressでいうところの`is-layout-flow`と同じ役割です。） */}
- `has--gutter` : サイトを通してコンテンツの左右に統一された余白をつけるためのクラス
- etc...

{/* WordPressを意識した設計になっています。 */}

これらのクラスは、Lismコンポーネントを使うと`isConstrained`や`isFlow`,`hasGutter`など対応するpropを指定するだけで出力されます。


## コンテナクエリ採用

主要なCSSプロパティに対してブレイクポイント指定が簡単にできるようになっているのがLismの特徴の一つですが、これらはコンテナクエリを採用しています。
（メディアクエリ版のCSSファイルも用意するかは検討中）


## コンテンツサイズの制御について

コンテンツ幅を統一するためのクラスとして、Lismでは`.is--container`と`.is--constrained`を用意しており、2種類のアプローチが可能です。

1. `is--container` : **自身の横幅**を制御できるクラス
2. `is--constrained` : **子要素の横幅**を制御するためのクラス

一応2パターン用意していますが、現在推奨しているのは後者の`.is--constrained`です。

例えば、ページ全体が次のような構造をしているとします。

```html {5}
<body>
	<header>ヘッダー</header>
	<main>
		<article>
			...コンテンツ...
		</article>
	</main>
	<footer>フッター</footer>
</body>
```

このとき、例えばコンテンツエリアの基本幅を`800px`にしたい時、次の①か②の選択肢があると思います。

```css
/* ① コンテンツのラッパー要素の幅を制御する*/
article{
	max-width: 800px;
}

/* ② コンテンツ自身（ラッパー要素の直下要素）の幅を制御する*/
article > * {
	max-width: 800px;
	margin-inline: auto;
}
```

LismのLayout Stateでは、

- ①に対応するのが `.is--container`
- ②に対応するのが `.is--constrained`

となっていますが、Lism設計では ① ではなく ② を基本的に使用するものとして全体を設計しています。

これは、汎用的なフレームワークの設計において①には次のような問題点があるためです。

<Note heading='①の問題点' preset='note' isFlow='s'>

**コンテナを飛び越えてその親の全幅サイズで表示したいコンテンツ**を作る場合の処理が複雑になってしまいます。

次のようなCSSを書いた経験はないでしょうか。

```css
.alignfull{
	width: 100vw;
	max-width: 100vw;
	left: calc(50% - 50vw);
}
```

別に複雑ではないように見えますが、`vw`ではスクロールバーの幅を考慮できないという問題点があり、その対応策を考えないといけません。  
さらに、ワンカラムレイアウトのサイトであれば上記のCSSだけで問題ないかもしれませんが、2カラムエリアでの処理をどうするか？という問題も考え出すとCSSがどんどん複雑化していきます。
</Note>


### じゃあなぜ2種類のクラスを用意しているのか？

<Alert preset='check'>
`@property`が使えるモダンブラウザでは、①が抱える問題をシンプルに回避できるようになっているためです。
</Alert>

なので、将来的には好みでどちらでも採用できるように、Lismでは①に対しては`@property`を使った方法を採用しつつ、2パターン用意しています。

また、`@property`が使えない環境でも、「コンテナの中では`.alignfull`要素を使用しない」という運用をすれば①を採用しても特に問題はありません。
