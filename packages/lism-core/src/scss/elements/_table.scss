// 方針 → td,thにボーダーをつける。
// Why? 特定のセルだけボーダーカスタマイズもしやすい.
// ただし、スクロール時にsticky要素の border が表示されない問題があることに注意。
// 　　　→ ベースは上下ボーダーのみにしてその問題に対処しやすくする。
@layer lism-init {
	table {
		width: 100%;
		// max-width: 100%;
		// line-height: 1.6;

		border: none;
		border-collapse: collapse; // memo: oveflow の指定によっては separate にしないとborderが表示されない場合があるので横スクロール時には注意。
		border-spacing: 0;
		--bdc: var(--bdc--base, #dcdcdc);
		--bds: solid;
		--bdwX: 1px;
		--bdwY: 1px;
		font-size: 0.9rem;
	}

	td,
	th {
		padding: 0.5em;
		border-inline: var(--bds) var(--bdwX) var(--bdc);
		border-block: var(--bds) var(--bdwY) var(--bdc);
	}

	th {
		color: var(--th--c, inherit);
		background-color: var(--th--bgc, transparent);
	}

	td {
		color: var(--td--c, inherit);
		background-color: var(--td--bgc, transparent);
	}

	thead {
		// --th--bgc: #f8f9fa;
		border-block-end: var(--thead--border);
	}

	tbody {
		// --th--bgc: #f8f9fa;
		// text-align: left; // tbody 内の th が中央寄せになるのを防ぐ？
	}

	tfoot {
		border-block-start: var(--tfoot--border);
	}

	:where(table) caption {
		margin-bottom: 0.25em;
		font-size: 0.9em;
		opacity: 0.8;
	}
}

/*
  ----------------------
    test style
  ----------------------
*/

.scroll-table {
	--cell-minW: 10em;
	display: block;
	width: 100%;
	max-width: 100%;
	padding-bottom: 16px;
	overflow-x: auto;

	td,
	th {
		min-width: var(--cell-minW);
	}

	table {
		// width: var(--table-width, 100%) !important; // コアの.has-fixed-layoutを上書き
		// min-width: 100%;
		// max-width: var(--table-width, 100%) !important;
		max-width: unset;
		// border-collapse: separate; // 横スクロール時にborderが表示されないバグへの対処
	}
}
// .scroll-table
.fix-1st-row {
	// 後ろが透過してると文字がかぶるので、何かしら背景色を初期セットする
	--td--bgc: var(--bgc--base, white);
	--th--bgc: var(--bgc--base, white);

	// rowspan考慮必要
	tr > :first-child {
		position: sticky;
		left: 0;
		z-index: 2; // 他のセルが relative だと上に来てしまうので z-index を少し上げておく

		// スクロール時にborderが表示されない問題への対処
		// thead th {
		// position: relative;
		// border-width: 0;

		border-inline: none;
		&::before {
			content: '';
			position: absolute;
			inset: 0 -1px 0 0;
			// border-style: inherit;
			// border-color: inherit;
			// border-block: var(--bds) var(--bdwY) var(--bdc);
			border-inline: var(--bds) var(--bdwX) var(--bdc);
		}
		// }
	}
}

.fix-thead {
	// 後ろが透過してると文字がかぶるので、何かしら背景色を初期セットする
	--th--bgc: var(--bgc--base, white);

	thead {
		position: sticky;
		top: 0px;
		z-index: 3; // .fix-1st-row の z-index +1

		// スクロール時にborderが表示されない問題への対処
		border: none;
		&::before {
			content: '';
			position: absolute;
			z-index: 3;
			inset: 0;
			border-block-start: solid var(--bdwY) var(--bdc);
			border-block-end: var(--thead--border);
		}
	}
}

// test用コード
:is(.fix-thead) {
	max-height: 200px;
	overflow-y: auto;

	tbody {
		line-height: 4;
	}
}

// borderで囲む
.is-style-table--solid {
	table {
		--bdwX: 1px;
	}
}
